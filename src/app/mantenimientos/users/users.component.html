
<br>

<div id="formulario" class="container-fluid">
    <div class="row">
          <div class="col-xs-10 col-sm-10 col-md-8">
              
                  <div class="col-xs-4 col-sm-4 col-md-3">
                      <div class="form-group">
                          <label for="controlPersona">Persona</label>
                          <select class="form-control" id="persona" [(ngModel)]="user.PersonaId">
                              <option *ngFor="let item of personas " [value]="item.Id">{{item.NombreCompleto}}</option>
                          </select>
                          <span class="class-style" *ngIf="!user.PersonaId">**</span>
                      </div>
                  </div>

                  <div class="col-xs-3 col-sm-3 col-md-2">
                          <div class="form-group">
                              <label for="controlNombreUsuario">Usuario</label>
                              <input type="text" 
                              [(ngModel)]="user.NombreUsuario"  
                              class="form-control" 
                              name="nombreUsuario" id="nombreUsuario">
                              <span class="class-style" *ngIf="!user.NombreUsuario">**</span>
                          </div>
                  </div>
      
                  <div class="col-xs-2 col-sm-2 col-md-2">
                          <div class="form-group">
                              <label for="controlPassword">Contrase√±a</label>
                              <input type="Password" 
                              [(ngModel)]="user.Password" 
                              class="form-control" 
                              name="password"
                              id="password">
                              <span class="class-style" *ngIf="!user.Password">**</span>
                          </div>
                   </div>

                  <div class="col-xs-3 col-sm-3 col-md-3">
                        <div class="form-group">
                            <label for="controlEmail">Email</label>
                            <input type="email" 
                            [(ngModel)]="user.Email" 
                            class="form-control" 
                            name="email"
                            id="email">
                            <span class="class-style" *ngIf="!user.Email">**</span>
                        </div>
                   </div>
                
              </div>
    </div>
  
    <div class="row">
          <div class="col-xs-8 col-sm-4 col-md-4">
                      <div class="col-xs-4 col-sm-2 col-md-2" *ngIf="!valor">
                        <button (click)="agregarUser()" 
                        class="btn btn-primary" 
                        id="agregarUser"
                        [disabled]="!user.PersonaId || !user.NombreUsuario || !user.Password || !user.Email">Agregar</button>
                      </div>
  
                    <div class="col-xs-4 col-sm-2 col-md-2" *ngIf="valor">
                      <button (click)="actualizarUser()" 
                      class="btn btn-primary"  
                      id="actualizarUser"
                      [disabled]="!user.PersonaId || !user.NombreUsuario || !user.Password || !user.Email">Actualizar</button>
                      </div>
                
              </div>
    </div>
    
</div>


<br>
<br>
<br>
<table class="table table-striped table-bordered table-sm row-border hover" datatable [dtOptions]="dtOptions"
[dtTrigger]="dtTrigger" id="datatable">
<thead>
  <tr>
    <th>Editar</th>
    <th>Eliminar <input type="checkbox" [(ngModel)]="check"> </th>
    <th>Persona</th>
    <th>Usuario</th>
    <th>Email</th>
  </tr>
</thead>
<tbody>
  <tr *ngFor="let item of users; let i = index">
    <td> <button id="editar" (click)="editarUser(item.Id)" class="btn btn-primary">Edit</button> </td>
    <td> <button id="Eliminar" (click)="eliminarUser(item.Id)" class="btn btn-danger" [disabled]="!check">Elim</button>  </td>
    <td>{{ item.Personas.NombreCompleto}}</td>
    <td>{{ item.NombreUsuario }}</td>
    <td>{{ item.Email}}</td>
  </tr>
</tbody>
</table>
